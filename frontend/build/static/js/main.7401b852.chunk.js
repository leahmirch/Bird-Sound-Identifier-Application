(this["webpackJsonphub-app"]=this["webpackJsonphub-app"]||[]).push([[0],{10:function(e,t,a){e.exports=a(24)},17:function(e,t,a){},18:function(e,t,a){},19:function(e,t,a){},24:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(9),c=a.n(s),o=(a(17),a(26));a(18);var l=function(e){return e.trigger?r.a.createElement("div",{className:"popup"},r.a.createElement("div",{className:"popup-inner"},r.a.createElement("button",{className:"close-btn",onClick:()=>e.setTrigger(!1)},"Close"),e.children)):""};a(19);function i(){const[e,t]=Object(n.useState)({bird:{},DataisLoaded:!1}),[a,s]=Object(n.useState)([]),[c,i]=Object(n.useState)(!1),[d,u]=Object(n.useState)(!1),[m,p]=Object(n.useState)([]),[b,E]=Object(n.useState)(""),[h,g]=Object(n.useState)(!1),[S,f]=Object(n.useState)(!0),[v,w]=Object(n.useState)(null),[O,y]=Object(n.useState)(null),[_,N]=Object(n.useState)([]),[C,D]=Object(n.useState)(""),[j,T]=Object(n.useState)({start:"",end:""}),k=Object(n.useCallback)(async()=>{await o.a.get(`http://${Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_HOST}:3001/birds/latest`).then(a=>{const n=a.data.data;var r={time:n[0],bird:n[1],lat:n[2],lon:n[3]};n[1]!==e.bird.bird&&i(!0),t({bird:r,DataisLoaded:!0})})},[e.bird.bird]),L=Object(n.useCallback)(async()=>{await o.a.get(`http://${Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_HOST}:3001/birds`).then(e=>{const t=e.data.data.map(e=>({date:new Date(e.created).toLocaleDateString(),time:new Date(e.created).toLocaleTimeString(),name:e.bird,lat:e.lat,lon:e.lon,created:new Date(e.created)}));t.sort((e,t)=>t.created-e.created),p(t)})},[]);function R(){const{DataisLoaded:t,bird:a}=e;return t?(c&&(!async function(){const t=e.bird.bird;try{const e=await o.a.get(`https://api.unsplash.com/search/photos?query=${t}&client_id=i7RoddcRb7XMxsfWJKJfI1SAuu4m7KPgz5Umdd7d3J4&per_page=6`),a=e.data.results.map(e=>e.urls.regular);s(a)}catch(a){console.error("Error fetching images: ",a)}}(),(async e=>{try{console.log("Fetching description for bird: "+e);const t=await o.a.get("https://en.wikipedia.org/api/rest_v1/page/summary/"+e);if(console.log("API response status:",t.status),console.log("API response data:",t.data),t.data&&t.data.extract){const a=`${t.data.extract}\n\nAppearance: The ${e} typically has distinctive features such as its size, color, and notable markings. For more details, visit ${t.data.content_urls.desktop.page}.`;E(a)}else E("Description not available")}catch(t){console.error("Error fetching bird description: ",t),t.response?(console.error("Response data:",t.response.data),console.error("Response status:",t.response.status),console.error("Response headers:",t.response.headers)):t.request?console.error("Request data:",t.request):console.error("Error message:",t.message),E("Error fetching description")}})(a.bird),i(!1)),a.bird):r.a.createElement("div",null,"Loading...")}const I=()=>{if("speechSynthesis"in window)if(h)window.speechSynthesis.cancel(),g(!1);else{const e=new SpeechSynthesisUtterance(b);e.lang="en-US",e.onend=()=>{g(!1)},window.speechSynthesis.speak(e),g(!0)}else alert("Sorry, your browser doesn't support text to speech!")},P=Object(n.useCallback)(()=>{if("webkitSpeechRecognition"in window){const e=new window.webkitSpeechRecognition;e.lang="en-US",e.continuous=!0,e.interimResults=!1,e.onstart=()=>{console.log("Voice recognition started.")},e.onresult=e=>{const t=e.results[e.resultIndex][0].transcript.trim().toLowerCase();console.log("Voice command received:",t),"read description"===t&&I()},e.onerror=e=>{console.error("Voice recognition error:",e.error)},e.onend=()=>{console.log("Voice recognition ended."),P()},e.start(),console.log("Voice recognition initialized.")}else alert("Sorry, your browser doesn't support voice recognition!")},[I]);Object(n.useEffect)(()=>{const e=setInterval(()=>{k()},5e3);return w(e),()=>clearInterval(e)},[k]),Object(n.useEffect)(()=>{L()},[L]),Object(n.useEffect)(()=>{P()},[P]);const A=e=>{const{name:t,value:a}=e.target;T(e=>({...e,[t]:a}))};return Object(n.useEffect)(()=>{(()=>{let e=m;C&&(e=e.filter(e=>e.name.toLowerCase().includes(C.toLowerCase()))),j.start&&j.end&&(e=e.filter(e=>{const t=new Date(e.created);return t>=new Date(j.start)&&t<=new Date(j.end)})),N(e)})()},[C,j,m]),r.a.createElement("div",null,r.a.createElement("main",null,r.a.createElement("header",{className:"header"},r.a.createElement("h1",null,r.a.createElement("i",{className:"fas fa-dove"})," Bird Sound Identifier"),r.a.createElement("div",null,r.a.createElement("button",{className:"update-btn",onClick:()=>{if(S)clearInterval(v);else{const e=setInterval(()=>{k()},5e3);w(e)}f(!S)}},S?"Stop Updates":"Start Updates"),r.a.createElement("button",{className:"history-btn",onClick:()=>{u(!0)}},r.a.createElement("i",{className:"fas fa-history"})," Bird History"))),r.a.createElement("div",{className:"parent-container"},r.a.createElement("h2",{className:"bird-name"},R())," ",r.a.createElement("div",{className:"fun-facts"},r.a.createElement("h3",null,"Description:"),r.a.createElement("p",null,b),r.a.createElement("button",{className:"read-btn",onClick:I},h?"Stop Reading":"Read Description")),r.a.createElement("h1",null,"Latest bird I heard was a ",R()," at ",function(){const{DataisLoaded:t,bird:a}=e;if(t){const e=new Date(a.time).toLocaleString("en-US",{timeZone:"America/New_York"}).split(", ");return`${e[1]} on ${e[0]}`}return r.a.createElement("div",null,"Loading...")}()),r.a.createElement("div",null,a.length>0?r.a.createElement("div",{className:"images-container"},a.map((e,t)=>r.a.createElement("img",{key:t,src:e,alt:"Bird "+(t+1),className:"bird-image"}))):null))),r.a.createElement(l,{trigger:d,setTrigger:u},r.a.createElement("div",{className:"table-container"},r.a.createElement("div",{className:"search-filter-container"},r.a.createElement("input",{type:"text",placeholder:"Search by bird name",value:C,onChange:e=>{D(e.target.value)}}),r.a.createElement("input",{type:"date",name:"start",placeholder:"Start Date",value:j.start,onChange:A}),r.a.createElement("input",{type:"date",name:"end",placeholder:"End Date",value:j.end,onChange:A})),r.a.createElement("div",{className:"date-container"},Array.from(new Set(m.map(e=>e.date))).map(e=>r.a.createElement("button",{key:e,onClick:()=>(e=>{O===e?(y(null),N([])):(y(e),N(m.filter(t=>t.date===e)))})(e),className:"date-button"},e))),r.a.createElement("div",{className:"bird-table"},O&&r.a.createElement("table",{className:"table table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Time"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Latitude"),r.a.createElement("th",null,"Longitude"))),r.a.createElement("tbody",null,_.map((e,t)=>r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.time),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.lat),r.a.createElement("td",null,e.lon)))))))))}c.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i,null)))}},[[10,1,2]]]);
//# sourceMappingURL=main.7401b852.chunk.js.map